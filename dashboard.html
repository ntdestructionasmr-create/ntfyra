<!DOCTYPE html>
<html>
<head>
  <title>NTFYRA Dashboard</title>
  <link rel="stylesheet" href="style.css">

  <!-- Print only diet section -->
  <style>
    @media print {
      body * {
        visibility: hidden;
      }
      #dietSection, #dietSection * {
        visibility: visible;
      }
      #dietSection {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
      }
    }
  </style>
</head>

<body>

  <h1>Welcome to NTFYRA ğŸ’ª</h1>
  <p>Your Smart Fitness System</p>

  <hr>

  <h2>Today's Personalized Plan</h2>

  <!-- TODAY WORKOUT -->
  <h3>ğŸ‹ï¸ Todayâ€™s Workout</h3>
  <p id="workoutPlan"></p>

  <hr>

  <!-- DIET SECTION -->
  <div id="dietSection">
    <h3>ğŸ½ï¸ Diet Plan</h3>
    <div id="dietPlan"></div>
  </div>

  <button onclick="window.print()">ğŸ“„ Download Diet PDF</button>

  <hr>

  <!-- YOGA -->
  <h3>ğŸ§˜ Yoga</h3>
  <p>5â€“10 minutes morning stretching & breathing</p>

  <hr>

  <!-- WEEKLY PLAN -->
  <h3>ğŸ“… Weekly Workout Plan</h3>
  <ul id="weeklyPlan"></ul>

  <hr>

  <!-- PROGRESS TRACKER -->
  <h3>ğŸ“ˆ Progress Tracker</h3>
  <input type="number" id="progressWeight" placeholder="Enter current weight (kg)">
  <button onclick="saveProgress()">Save Progress</button>
  <ul id="progressList"></ul>

  <hr>
  <a href="index.html">â¬… Back to Home</a>

  <script>
    /* ================= USER DATA ================= */
    const weight = Number(localStorage.getItem("weight"));
    const goal = localStorage.getItem("goal");
    const workout = localStorage.getItem("workout");

    /* ================= TODAY WORKOUT ================= */
    let workoutText = "";
    if (workout === "home")
      workoutText = "Home Workout â€“ Pushups, Squats, Plank";
    else if (workout === "gym")
      workoutText = "Gym Workout â€“ Chest, Back, Legs";
    else
      workoutText = "Mixed Workout â€“ Home + Gym";

    document.getElementById("workoutPlan").innerText = workoutText;

    /* ================= DIET LOGIC ================= */
    let calories = 0;
    let protein = 0;

    if (goal === "gain") {
      calories = weight * 38;
      protein = weight * 1.6;
    } else if (goal === "muscle") {
      calories = weight * 33;
      protein = weight * 2;
    } else {
      calories = weight * 29;
      protein = weight * 1.5;
    }

    document.getElementById("dietPlan").innerHTML = `
      <p><b>Daily Calories:</b> ${calories} kcal</p>
      <p><b>Protein Target:</b> ${protein} g</p>
      <ul>
        <li><b>Breakfast:</b> Eggs / Paneer + Chapati</li>
        <li><b>Lunch:</b> Rice + Dal / Chicken + Vegetables</li>
        <li><b>Snack:</b> Banana + Peanuts</li>
        <li><b>Dinner:</b> Chapati + Eggs / Paneer</li>
      </ul>
      <p><i>Generated by NTFYRA â€“ Smart Fitness System</i></p>
    `;

    /* ================= WEEKLY WORKOUT PLANNER ================= */
    const weeklyPlan = document.getElementById("weeklyPlan");
    let plan = [];

    if (workout === "home") {
      plan = [
        "Mon â€“ Chest & Arms (Home)",
        "Tue â€“ Legs & Core (Home)",
        "Wed â€“ Rest / Stretching",
        "Thu â€“ Back & Shoulders (Home)",
        "Fri â€“ Full Body (Home)",
        "Sat â€“ Yoga / Cardio",
        "Sun â€“ Rest"
      ];
    } else if (workout === "gym") {
      plan = [
        "Mon â€“ Chest & Triceps (Gym)",
        "Tue â€“ Back & Biceps (Gym)",
        "Wed â€“ Legs (Gym)",
        "Thu â€“ Shoulders & Abs",
        "Fri â€“ Full Body",
        "Sat â€“ Cardio / Yoga",
        "Sun â€“ Rest"
      ];
    } else {
      plan = [
        "Mon â€“ Gym: Chest",
        "Tue â€“ Home: Legs",
        "Wed â€“ Rest / Stretching",
        "Thu â€“ Gym: Back",
        "Fri â€“ Home: Full Body",
        "Sat â€“ Yoga / Cardio",
        "Sun â€“ Rest"
      ];
    }

    plan.forEach(day => {
      const li = document.createElement("li");
      li.innerText = day;
      weeklyPlan.appendChild(li);
    });

    /* ================= PROGRESS TRACKER ================= */
    const progressList = document.getElementById("progressList");

    function saveProgress() {
      const currentWeight = document.getElementById("progressWeight").value;
      if (!currentWeight) return;

      let progress = JSON.parse(localStorage.getItem("progress")) || [];
      const today = new Date().toLocaleDateString();

      progress.push({ date: today, weight: currentWeight });
      localStorage.setItem("progress", JSON.stringify(progress));

      document.getElementById("progressWeight").value = "";
      renderProgress();
    }

    function renderProgress() {
      progressList.innerHTML = "";
      let progress = JSON.parse(localStorage.getItem("progress")) || [];

      progress.forEach(entry => {
        const li = document.createElement("li");
        li.innerText = `${entry.date} â€“ ${entry.weight} kg`;
        progressList.appendChild(li);
      });
    }

    renderProgress();
  </script>

</body>
</html>
